<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Settings</title>
    <style>
        input, button {
            padding: 10px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
        }
        button {
            background-color: #007BFF;
            color: white;
            border: none;
        }
        button:hover {
            background-color: #0056b3;
        }
        .message {
            padding: 10px;
            margin: 10px;
            border-radius: 4px;
            width: 100%;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <%- include('_navbar', { userRole: userRole }) %>
        <div class="main_container">
    <h1>Settings</h1>

    <form action="/students/settings" method="post">
        <label for="attendanceThreshold">Attendance Notification Threshold (%)</label>
        <input type="number" id="attendanceThreshold" name="attendanceThreshold" value="<%= settings.attendanceThreshold %>" required>

        <label for="dueDateNotificationDays">Days Before Due Date for Notification</label>
        <input type="number" id="dueDateNotificationDays" name="dueDateNotificationDays" value="<%= settings.dueDateNotificationDays %>" required>
        
        <button type="submit">Save Settings</button>
    </form>
    <button onclick="window.location.href='/students/student-dashboard'">Back to Dashboard</button>
    
    <h2>Change Password</h2>
    <form action="/students/change-password" method="post">
        <label for="oldPassword">Old Password</label>
        <input type="password" id="oldPassword" name="oldPassword" required>

        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" name="newPassword" required>

        <label for="confirmPassword">Confirm New Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required>
        
        <button type="submit">Change Password</button>
    </form>
    
    <% if (message) { %>
        <div class="message <%= messageType %>">
            <%= message %>
        </div>
    <% } %>
    </div>
    </div>
</body>
</html>
